# 计算机图形学知识点汇总

## 什么是图形渲染管线？

opengl中的大部分工作是将3D坐标转换为2D像素，而这部分工作主要就是通过图形渲染管线来实现的。其大致含义就是将原始数据输送进管道，期间经过各种变换处理最终转为像素展示在屏幕是上。

图形渲染管线主要包括两个部分：

* 第一部分，将3D坐标转为2D坐标
* 第二部分，将2D坐标转变为实际的有颜色的像素。

图形渲染管线的几个步骤：

* Vertex Shader
* Primitve Assembly
* Geometry Shader
* Rasterization
* Fragment Shader
* Tests And Blengding

顶点着色器-> 形状(图元)装配->几何着色器->测试与混合->片段着色器->光栅化

### 顶点着色器 Vertex Shader

单独的顶点作为输入。顶点着色器的主要目的是把3D坐标转换为另一种3D坐标，同时允许对顶点属性做进一步的操作。

### 图元装配 Primitive Assembly

将顶点着色器输出的所有顶点作为输入，将所有的点装配成指定的图元形状。

### 几何着色器 Geometry Shader

几何着色器将图元形式的一系列的顶点作为输入，它可以通过产生新的顶点来构造出新的图元来生成新的形状。

### 光栅化 Rasterization

几何着色器的输出作为光栅化的输入，会把图元映射为屏幕上的像素，生成供片段着色器执行的片段（Fragment）；在片段着色器执行之前会执行裁切（clip），丢弃视图范围外的像素。

### 片段着色器 Fragment Shader

片段着色器的主要目的是计算一个像素的最终颜色，这里也是openGL高级效果产生的地方。通产片段着色器包含3D场景数据（光照、阴影、光的颜色等），这些数据可以被用来计算像素的最终颜色。

### Alpha测试和混合（Blending）

这个阶段检测片段对应的深度值（z-buffer），用它们判断这个像素是其他物体的前面还是后面，决定是否应该丢弃。这个阶段也会检查alpha值并对物体进行混合（blend）。所以，即使在片段着色器中计算出来了一个像素的颜色，在渲染多个三角形的时候最后的像素颜色也可能完全不同。

